/*
// Copyright (C) 2012-2024 Stealth Software Technologies, Inc.
//
// Permission is hereby granted, free of charge, to any person
// obtaining a copy of this software and associated documentation
// files (the "Software"), to deal in the Software without
// restriction, including without limitation the rights to use,
// copy, modify, merge, publish, distribute, sublicense, and/or
// sell copies of the Software, and to permit persons to whom the
// Software is furnished to do so, subject to the following
// conditions:
//
// The above copyright notice and this permission notice (including
// the next paragraph) shall be included in all copies or
// substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
// OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
// HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
// WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
// OTHER DEALINGS IN THE SOFTWARE.
//
// SPDX-License-Identifier: MIT
*/

@import "../common.css";

/*----------------------------------------------------------------------
// Spacer variables
//----------------------------------------------------------------------
//
// Bootstrap sets its spacing levels (0-5) using a $spacer value in its
// SASS [1], but it doesn't define variables for these values in its
// compiled CSS. So, we define our own.
//
// [1] https://github.com/twbs/bootstrap/blob/v5.3.3/scss/_variables.scss#L409-L419
*/

:root {
  --sst_dom_bootstrap5_spacer: 1.00rem;
  --sst_dom_bootstrap5_spacer_0: calc(0.00 * var(--sst_dom_bootstrap5_spacer));
  --sst_dom_bootstrap5_spacer_1: calc(0.25 * var(--sst_dom_bootstrap5_spacer));
  --sst_dom_bootstrap5_spacer_2: calc(0.50 * var(--sst_dom_bootstrap5_spacer));
  --sst_dom_bootstrap5_spacer_3: calc(1.00 * var(--sst_dom_bootstrap5_spacer));
  --sst_dom_bootstrap5_spacer_4: calc(1.50 * var(--sst_dom_bootstrap5_spacer));
  --sst_dom_bootstrap5_spacer_5: calc(3.00 * var(--sst_dom_bootstrap5_spacer));
}

/*----------------------------------------------------------------------
// Shadow geometry variables
//----------------------------------------------------------------------
*/

:root {

  --sst_dom_bootstrap5_shadow_sm_offset_x: 0.000rem;
  --sst_dom_bootstrap5_shadow_sm_offset_y: 0.125rem;
  --sst_dom_bootstrap5_shadow_sm_radius: 0.250rem;
  --sst_dom_bootstrap5_shadow_sm_margin_left: calc(var(--sst_dom_bootstrap5_shadow_sm_radius) - var(--sst_dom_bootstrap5_shadow_sm_offset_x));
  --sst_dom_bootstrap5_shadow_sm_margin_right: calc(var(--sst_dom_bootstrap5_shadow_sm_radius) + var(--sst_dom_bootstrap5_shadow_sm_offset_x));
  --sst_dom_bootstrap5_shadow_sm_margin_top: calc(var(--sst_dom_bootstrap5_shadow_sm_radius) - var(--sst_dom_bootstrap5_shadow_sm_offset_y));
  --sst_dom_bootstrap5_shadow_sm_margin_bottom: calc(var(--sst_dom_bootstrap5_shadow_sm_radius) + var(--sst_dom_bootstrap5_shadow_sm_offset_y));
  --sst_dom_bootstrap5_shadow_sm_margin_x: calc(max(var(--sst_dom_bootstrap5_shadow_sm_margin_left), var(--sst_dom_bootstrap5_shadow_sm_margin_right)));
  --sst_dom_bootstrap5_shadow_sm_margin_y: calc(max(var(--sst_dom_bootstrap5_shadow_sm_margin_top), var(--sst_dom_bootstrap5_shadow_sm_margin_bottom)));

  --sst_dom_bootstrap5_shadow_offset_x: 0.000rem;
  --sst_dom_bootstrap5_shadow_offset_y: 0.500rem;
  --sst_dom_bootstrap5_shadow_radius: 1.000rem;
  --sst_dom_bootstrap5_shadow_margin_left: calc(var(--sst_dom_bootstrap5_shadow_radius) - var(--sst_dom_bootstrap5_shadow_offset_x));
  --sst_dom_bootstrap5_shadow_margin_right: calc(var(--sst_dom_bootstrap5_shadow_radius) + var(--sst_dom_bootstrap5_shadow_offset_x));
  --sst_dom_bootstrap5_shadow_margin_top: calc(var(--sst_dom_bootstrap5_shadow_radius) - var(--sst_dom_bootstrap5_shadow_offset_y));
  --sst_dom_bootstrap5_shadow_margin_bottom: calc(var(--sst_dom_bootstrap5_shadow_radius) + var(--sst_dom_bootstrap5_shadow_offset_y));
  --sst_dom_bootstrap5_shadow_margin_x: calc(max(var(--sst_dom_bootstrap5_shadow_margin_left), var(--sst_dom_bootstrap5_shadow_margin_right)));
  --sst_dom_bootstrap5_shadow_margin_y: calc(max(var(--sst_dom_bootstrap5_shadow_margin_top), var(--sst_dom_bootstrap5_shadow_margin_bottom)));

  --sst_dom_bootstrap5_shadow_lg_offset_x: 0.000rem;
  --sst_dom_bootstrap5_shadow_lg_offset_y: 1.000rem;
  --sst_dom_bootstrap5_shadow_lg_radius: 3.000rem;
  --sst_dom_bootstrap5_shadow_lg_margin_left: calc(var(--sst_dom_bootstrap5_shadow_lg_radius) - var(--sst_dom_bootstrap5_shadow_lg_offset_x));
  --sst_dom_bootstrap5_shadow_lg_margin_right: calc(var(--sst_dom_bootstrap5_shadow_lg_radius) + var(--sst_dom_bootstrap5_shadow_lg_offset_x));
  --sst_dom_bootstrap5_shadow_lg_margin_top: calc(var(--sst_dom_bootstrap5_shadow_lg_radius) - var(--sst_dom_bootstrap5_shadow_lg_offset_y));
  --sst_dom_bootstrap5_shadow_lg_margin_bottom: calc(var(--sst_dom_bootstrap5_shadow_lg_radius) + var(--sst_dom_bootstrap5_shadow_lg_offset_y));
  --sst_dom_bootstrap5_shadow_lg_margin_x: calc(max(var(--sst_dom_bootstrap5_shadow_lg_margin_left), var(--sst_dom_bootstrap5_shadow_lg_margin_right)));
  --sst_dom_bootstrap5_shadow_lg_margin_y: calc(max(var(--sst_dom_bootstrap5_shadow_lg_margin_top), var(--sst_dom_bootstrap5_shadow_lg_margin_bottom)));

}

/*----------------------------------------------------------------------
// General padding variables
//----------------------------------------------------------------------
//
// Bootstrap generally uses the same padding values for things like
// buttons and text inputs, but it doesn't define any variables for
// these padding values. So, we define our own.
*/

:root {
  --sst_dom_bootstrap5_padding_x: calc(3.0 * var(--sst_dom_bootstrap5_spacer_1));
  --sst_dom_bootstrap5_padding_y: calc(1.5 * var(--sst_dom_bootstrap5_spacer_1));
}

/* TODO: Add a focus ring (box-shadow) for buttons by default? */

/*----------------------------------------------------------------------
// .form-control box-shadow spacing
//----------------------------------------------------------------------
//
// Bootstrap uses box-shadow to highlight .form-control elements that
// have focus, but it doesn't provide any space for the box-shadow. This
// can cause issues such as the box-shadow overlapping adjacent elements
// or being cut off by overflow:hidden.
//
// We handle this by providing some variables and classes that can be
// applied to a container element to add space for the box-shadow.
//
// We do NOT try to change Bootstrap to automatically include space for
// the box-shadow, as this is quite involved and ultimately causes more
// trouble than it's worth.
*/

:root {
  --sst_dom_bootstrap5_form_control_margin_left: var(--sst_dom_bootstrap5_spacer_1);
  --sst_dom_bootstrap5_form_control_margin_right: var(--sst_dom_bootstrap5_spacer_1);
  --sst_dom_bootstrap5_form_control_margin_top: var(--sst_dom_bootstrap5_spacer_1);
  --sst_dom_bootstrap5_form_control_margin_bottom: var(--sst_dom_bootstrap5_spacer_1);
}

.sst_dom_bootstrap5_form_control_margin {
  margin-left: var(--sst_dom_bootstrap5_form_control_margin_left);
  margin-right: var(--sst_dom_bootstrap5_form_control_margin_right);
  margin-top: var(--sst_dom_bootstrap5_form_control_margin_top);
  margin-bottom: var(--sst_dom_bootstrap5_form_control_margin_bottom);
}

/*----------------------------------------------------------------------
// .form-control.sst_dom_bootstrap5_is_validating
//----------------------------------------------------------------------
//
// This class colors a .form-control element yellow and displays an
// hourglass-split icon to indicate that the value is currently being
// validated. This is similar to the .is-valid and .is-invalid classes
// provided by Bootstrap.
//
// Our code is based on the Bootstrap code for the .is-valid class,
// which you can find by searching for ".form-control.is-valid" in [1].
// The main differences are:
//
//    1. We use the --bs-warning color.
//
//    2. We use the hourglass-split icon [2].
//
// [1] https://github.com/twbs/bootstrap/blob/v5.3.3/dist/css/bootstrap.css
// [2] https://github.com/twbs/icons/blob/v1.11.3/icons/hourglass-split.svg
*/

.form-control.sst_dom_bootstrap5_is_validating {
  border-color: var(--bs-warning);
  padding-right: calc(1.5em + 0.75rem);
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' fill='%23FFC107' viewBox='0 0 16 16'%3E%3Cpath d='M2.5 15a.5.5 0 1 1 0-1h1v-1a4.5 4.5 0 0 1 2.557-4.06c.29-.139.443-.377.443-.59v-.7c0-.213-.154-.451-.443-.59A4.5 4.5 0 0 1 3.5 3V2h-1a.5.5 0 0 1 0-1h11a.5.5 0 0 1 0 1h-1v1a4.5 4.5 0 0 1-2.557 4.06c-.29.139-.443.377-.443.59v.7c0 .213.154.451.443.59A4.5 4.5 0 0 1 12.5 13v1h1a.5.5 0 0 1 0 1zm2-13v1c0 .537.12 1.045.337 1.5h6.326c.216-.455.337-.963.337-1.5V2zm3 6.35c0 .701-.478 1.236-1.011 1.492A3.5 3.5 0 0 0 4.5 13s.866-1.299 3-1.48zm1 0v3.17c2.134.181 3 1.48 3 1.48a3.5 3.5 0 0 0-1.989-3.158C8.978 9.586 8.5 9.052 8.5 8.351z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right calc(0.375em + 0.1875rem) center;
  background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
}

.form-control.sst_dom_bootstrap5_is_validating:focus {
  border-color: var(--bs-warning);
  box-shadow: 0 0 0 0.25rem rgba(var(--bs-warning-rgb), 0.25);
}

textarea.form-control.sst_dom_bootstrap5_is_validating {
  padding-right: calc(1.5em + 0.75rem);
  background-position: top calc(0.375em + 0.1875rem) right calc(0.375em + 0.1875rem);
}

/*----------------------------------------------------------------------
// .invalid-feedback.sst_dom_bootstrap5_animate_height
//----------------------------------------------------------------------
//
// This class modifies an .invalid-feedback element so that its height
// eases back and forth from zero when it appears and disappears. This
// comes with the following caveats:
//
//    1. The .invalid-feedback element must be structured as follows:
//
//             <div class="invalid-feedback sst_dom_bootstrap5_animate_height">
//               <div>
//                 Message
//               </div>
//             </div>
//
//    2. The .invalid-feedback element will have zero height instead of
//       being display:none when it disappears.
*/

.invalid-feedback.sst_dom_bootstrap5_animate_height {
  display: grid;
  grid-template-rows: 0fr;
  margin-top: 0;
  transition:
    grid-template-rows 0.35s ease,
    margin-top 0.35s ease
  ;
}

.is-invalid ~ .invalid-feedback.sst_dom_bootstrap5_animate_height {
  grid-template-rows: 1fr;
  margin-top: var(--sst_dom_bootstrap5_spacer_1);
}

.invalid-feedback.sst_dom_bootstrap5_animate_height > div {
  overflow: hidden;
}

@media (prefers-reduced-motion) {

  .invalid-feedback.sst_dom_bootstrap5_animate_height {
    transition: initial;
  }

}
